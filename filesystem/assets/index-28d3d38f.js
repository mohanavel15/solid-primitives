(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const ke=(e,i)=>e===i,Fe=Symbol("solid-track"),Q={equals:ke};let R=null,Ae=Ee;const O=1,X=2,he={owned:null,cleanups:null,context:null,owner:null},ie={};var m=null;let re=null,w=null,v=null,P=null,z=0;function G(e,i){const t=w,l=m,s=e.length===0,o=s?he:{owned:null,cleanups:null,context:null,owner:i===void 0?l:i},n=s?e:()=>e(()=>x(()=>te(o)));m=o,w=null;try{return L(n,!0)}finally{w=t,m=l}}function T(e,i){i=i?Object.assign({},Q,i):Q;const t={value:e,observers:null,observerSlots:null,comparator:i.equals||void 0},l=s=>(typeof s=="function"&&(s=s(t.value)),$e(t,s));return[me.bind(t),l]}function ce(e,i,t){const l=ee(e,i,!0,O);U(l)}function W(e,i,t){const l=ee(e,i,!1,O);U(l)}function I(e,i,t){t=t?Object.assign({},Q,t):Q;const l=ee(e,i,!0,0);return l.observers=null,l.observerSlots=null,l.comparator=t.equals||void 0,U(l),me.bind(l)}function J(e,i,t){let l,s,o;arguments.length===2&&typeof i=="object"||arguments.length===1?(l=!0,s=e,o=i||{}):(l=e,s=i,o=t||{});let n=null,r=ie,f=!1,d="initialValue"in o,c=typeof l=="function"&&I(l);const u=new Set,[a,g]=(o.storage||T)(o.initialValue),[y,h]=T(void 0),[_,j]=T(void 0,{equals:!1}),[b,F]=T(d?"ready":"unresolved");function p($,E,S,H){return n===$&&(n=null,d=!0,($===r||E===r)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(H,{value:E})),r=ie,M(E,S)),E}function M($,E){L(()=>{E===void 0&&g(()=>$),F(E!==void 0?"errored":"ready"),h(E);for(const S of u.keys())S.decrement();u.clear()},!1)}function q(){const $=je,E=a(),S=y();if(S!==void 0&&!n)throw S;return w&&!w.user&&$&&ce(()=>{_(),n&&($.resolved||u.has($)||($.increment(),u.add($)))}),E}function ne($=!0){if($!==!1&&f)return;f=!1;const E=c?c():l;if(E==null||E===!1){p(n,x(a));return}const S=r!==ie?r:x(()=>s(E,{value:a(),refetching:$}));return typeof S!="object"||!(S&&"then"in S)?(p(n,S,void 0,E),S):(n=S,f=!0,queueMicrotask(()=>f=!1),L(()=>{F(d?"refreshing":"pending"),j()},!1),S.then(H=>p(S,H,void 0,E),H=>p(S,void 0,ve(H),E)))}return Object.defineProperties(q,{state:{get:()=>b()},error:{get:()=>y()},loading:{get(){const $=b();return $==="pending"||$==="refreshing"}},latest:{get(){if(!d)return q();const $=y();if($&&!n)throw $;return a()}}}),c?ce(()=>ne(!1)):ne(!1),[q,{refetch:ne,mutate:g}]}function Te(e){return L(e,!1)}function x(e){if(w===null)return e();const i=w;w=null;try{return e()}finally{w=i}}function we(e){return m===null||(m.cleanups===null?m.cleanups=[e]:m.cleanups.push(e)),e}function _e(e,i){R||(R=Symbol("error")),m=ee(void 0,void 0,!0),m.context={[R]:[i]};try{return e()}catch(t){oe(t)}finally{m=m.owner}}let je;function me(){if(this.sources&&this.state)if(this.state===O)U(this);else{const e=v;v=null,L(()=>Y(this),!1),v=e}if(w){const e=this.observers?this.observers.length:0;w.sources?(w.sources.push(this),w.sourceSlots.push(e)):(w.sources=[this],w.sourceSlots=[e]),this.observers?(this.observers.push(w),this.observerSlots.push(w.sources.length-1)):(this.observers=[w],this.observerSlots=[w.sources.length-1])}return this.value}function $e(e,i,t){let l=e.value;return(!e.comparator||!e.comparator(l,i))&&(e.value=i,e.observers&&e.observers.length&&L(()=>{for(let s=0;s<e.observers.length;s+=1){const o=e.observers[s],n=re&&re.running;n&&re.disposed.has(o),(n?!o.tState:!o.state)&&(o.pure?v.push(o):P.push(o),o.observers&&Se(o)),n||(o.state=O)}if(v.length>1e6)throw v=[],new Error},!1)),i}function U(e){if(!e.fn)return;te(e);const i=m,t=w,l=z;w=m=e,Ce(e,e.value,l),w=t,m=i}function Ce(e,i,t){let l;try{l=e.fn(i)}catch(s){return e.pure&&(e.state=O,e.owned&&e.owned.forEach(te),e.owned=null),e.updatedAt=t+1,oe(s)}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?$e(e,l):e.value=l,e.updatedAt=t)}function ee(e,i,t,l=O,s){const o={fn:e,state:l,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:i,owner:m,context:null,pure:t};return m===null||m!==he&&(m.owned?m.owned.push(o):m.owned=[o]),o}function be(e){if(e.state===0)return;if(e.state===X)return Y(e);if(e.suspense&&x(e.suspense.inFallback))return e.suspense.effects.push(e);const i=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<z);)e.state&&i.push(e);for(let t=i.length-1;t>=0;t--)if(e=i[t],e.state===O)U(e);else if(e.state===X){const l=v;v=null,L(()=>Y(e,i[0]),!1),v=l}}function L(e,i){if(v)return e();let t=!1;i||(v=[]),P?t=!0:P=[],z++;try{const l=e();return Ne(t),l}catch(l){t||(P=null),v=null,oe(l)}}function Ne(e){if(v&&(Ee(v),v=null),e)return;const i=P;P=null,i.length&&L(()=>Ae(i),!1)}function Ee(e){for(let i=0;i<e.length;i++)be(e[i])}function Y(e,i){e.state=0;for(let t=0;t<e.sources.length;t+=1){const l=e.sources[t];if(l.sources){const s=l.state;s===O?l!==i&&(!l.updatedAt||l.updatedAt<z)&&be(l):s===X&&Y(l,i)}}}function Se(e){for(let i=0;i<e.observers.length;i+=1){const t=e.observers[i];t.state||(t.state=X,t.pure?v.push(t):P.push(t),t.observers&&Se(t))}}function te(e){let i;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),l=e.sourceSlots.pop(),s=t.observers;if(s&&s.length){const o=s.pop(),n=t.observerSlots.pop();l<s.length&&(o.sourceSlots[n]=l,s[l]=o,t.observerSlots[l]=n)}}if(e.owned){for(i=e.owned.length-1;i>=0;i--)te(e.owned[i]);e.owned=null}if(e.cleanups){for(i=e.cleanups.length-1;i>=0;i--)e.cleanups[i]();e.cleanups=null}e.state=0,e.context=null}function ve(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function fe(e,i){for(const t of e)t(i)}function oe(e){const i=R&&pe(m,R);if(!i)throw e;const t=ve(e);P?P.push({fn(){fe(i,t)},state:O}):fe(i,t)}function pe(e,i){return e?e.context&&e.context[i]!==void 0?e.context[i]:pe(e.owner,i):void 0}const xe=Symbol("fallback");function ue(e){for(let i=0;i<e.length;i++)e[i]()}function Pe(e,i,t={}){let l=[],s=[],o=[],n=0,r=i.length>1?[]:null;return we(()=>ue(o)),()=>{let f=e()||[],d,c;return f[Fe],x(()=>{let a=f.length,g,y,h,_,j,b,F,p,M;if(a===0)n!==0&&(ue(o),o=[],l=[],s=[],n=0,r&&(r=[])),t.fallback&&(l=[xe],s[0]=G(q=>(o[0]=q,t.fallback())),n=1);else if(n===0){for(s=new Array(a),c=0;c<a;c++)l[c]=f[c],s[c]=G(u);n=a}else{for(h=new Array(a),_=new Array(a),r&&(j=new Array(a)),b=0,F=Math.min(n,a);b<F&&l[b]===f[b];b++);for(F=n-1,p=a-1;F>=b&&p>=b&&l[F]===f[p];F--,p--)h[p]=s[F],_[p]=o[F],r&&(j[p]=r[F]);for(g=new Map,y=new Array(p+1),c=p;c>=b;c--)M=f[c],d=g.get(M),y[c]=d===void 0?-1:d,g.set(M,c);for(d=b;d<=F;d++)M=l[d],c=g.get(M),c!==void 0&&c!==-1?(h[c]=s[d],_[c]=o[d],r&&(j[c]=r[d]),c=y[c],g.set(M,c)):o[d]();for(c=b;c<a;c++)c in h?(s[c]=h[c],o[c]=_[c],r&&(r[c]=j[c],r[c](c))):s[c]=G(u);s=s.slice(0,n=a),l=f.slice(0)}return s});function u(a){if(o[c]=a,r){const[g,y]=T(c);return r[c]=y,i(f[c],g)}return i(f[c])}}}function C(e,i){return x(()=>e(i||{}))}const Oe=e=>`Stale read from <${e}>.`;function Me(e){const i="fallback"in e&&{fallback:()=>e.fallback};return I(Pe(()=>e.each,e.children,i||void 0))}function V(e){const i=e.keyed,t=I(()=>e.when,void 0,{equals:(l,s)=>i?l===s:!l==!s});return I(()=>{const l=t();if(l){const s=e.children;return typeof s=="function"&&s.length>0?x(()=>s(i?l:()=>{if(!x(t))throw Oe("Show");return e.when})):s}return e.fallback},void 0,void 0)}let K;function Le(e){let i;const[t,l]=T(i,void 0);return K||(K=new Set),K.add(l),we(()=>K.delete(l)),I(()=>{let s;if(s=t()){const o=e.fallback;return typeof o=="function"&&o.length?x(()=>o(s,()=>l())):o}return _e(()=>e.children,l)},void 0,void 0)}function De(e,i,t){let l=t.length,s=i.length,o=l,n=0,r=0,f=i[s-1].nextSibling,d=null;for(;n<s||r<o;){if(i[n]===t[r]){n++,r++;continue}for(;i[s-1]===t[o-1];)s--,o--;if(s===n){const c=o<l?r?t[r-1].nextSibling:t[o-r]:f;for(;r<o;)e.insertBefore(t[r++],c)}else if(o===r)for(;n<s;)(!d||!d.has(i[n]))&&i[n].remove(),n++;else if(i[n]===t[o-1]&&t[r]===i[s-1]){const c=i[--s].nextSibling;e.insertBefore(t[r++],i[n++].nextSibling),e.insertBefore(t[--o],c),i[s]=t[o]}else{if(!d){d=new Map;let u=r;for(;u<o;)d.set(t[u],u++)}const c=d.get(i[n]);if(c!=null)if(r<c&&c<o){let u=n,a=1,g;for(;++u<s&&u<o&&!((g=d.get(i[u]))==null||g!==c+a);)a++;if(a>c-r){const y=i[n];for(;r<c;)e.insertBefore(t[r++],y)}else e.replaceChild(t[r++],i[n++])}else n++;else i[n++].remove()}}}const ae="_$DX_DELEGATE";function Ie(e,i,t,l={}){let s;return G(o=>{s=o,i===document?e():N(i,e(),i.firstChild?null:void 0,t)},l.owner),()=>{s(),i.textContent=""}}function k(e,i,t){let l;const s=()=>{const n=document.createElement("template");return n.innerHTML=e,t?n.content.firstChild.firstChild:n.content.firstChild},o=i?()=>(l||(l=s())).cloneNode(!0):()=>x(()=>document.importNode(l||(l=s()),!0));return o.cloneNode=o,o}function Be(e,i=window.document){const t=i[ae]||(i[ae]=new Set);for(let l=0,s=e.length;l<s;l++){const o=e[l];t.has(o)||(t.add(o),i.addEventListener(o,He))}}function qe(e,i,t,l){if(l)Array.isArray(t)?(e[`$$${i}`]=t[0],e[`$$${i}Data`]=t[1]):e[`$$${i}`]=t;else if(Array.isArray(t)){const s=t[0];e.addEventListener(i,t[0]=o=>s.call(e,t[1],o))}else e.addEventListener(i,t)}function N(e,i,t,l){if(t!==void 0&&!l&&(l=[]),typeof i!="function")return Z(e,i,l,t);W(s=>Z(e,i(),s,t),l)}function He(e){const i=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}});t;){const l=t[i];if(l&&!t.disabled){const s=t[`${i}Data`];if(s!==void 0?l.call(t,s,e):l.call(t,e),e.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Z(e,i,t,l,s){for(;typeof t=="function";)t=t();if(i===t)return t;const o=typeof i,n=l!==void 0;if(e=n&&t[0]&&t[0].parentNode||e,o==="string"||o==="number")if(o==="number"&&(i=i.toString()),n){let r=t[0];r&&r.nodeType===3?r.data=i:r=document.createTextNode(i),t=B(e,t,l,r)}else t!==""&&typeof t=="string"?t=e.firstChild.data=i:t=e.textContent=i;else if(i==null||o==="boolean")t=B(e,t,l);else{if(o==="function")return W(()=>{let r=i();for(;typeof r=="function";)r=r();t=Z(e,r,t,l)}),()=>t;if(Array.isArray(i)){const r=[],f=t&&Array.isArray(t);if(se(r,i,t,s))return W(()=>t=Z(e,r,t,l,!0)),()=>t;if(r.length===0){if(t=B(e,t,l),n)return t}else f?t.length===0?de(e,r,l):De(e,t,r):(t&&B(e),de(e,r));t=r}else if(i instanceof Node){if(Array.isArray(t)){if(n)return t=B(e,t,l,i);B(e,t,null,i)}else t==null||t===""||!e.firstChild?e.appendChild(i):e.replaceChild(i,e.firstChild);t=i}else console.warn("Unrecognized value. Skipped inserting",i)}return t}function se(e,i,t,l){let s=!1;for(let o=0,n=i.length;o<n;o++){let r=i[o],f=t&&t[o];if(r instanceof Node)e.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))s=se(e,r,f)||s;else if(typeof r=="function")if(l){for(;typeof r=="function";)r=r();s=se(e,Array.isArray(r)?r:[r],Array.isArray(f)?f:[f])||s}else e.push(r),s=!0;else{const d=String(r);f&&f.nodeType===3?(f.data=d,e.push(f)):e.push(document.createTextNode(d))}}return s}function de(e,i,t=null){for(let l=0,s=i.length;l<s;l++)e.insertBefore(i[l],t)}function B(e,i,t,l){if(t===void 0)return e.textContent="";const s=l||document.createTextNode("");if(i.length){let o=!1;for(let n=i.length-1;n>=0;n--){const r=i[n];if(s!==r){const f=r.parentNode===e;!o&&!n?f?e.replaceChild(s,r):e.insertBefore(s,t):f&&r.remove()}else o=!0}}else e.insertBefore(s,t);return[s]}const A=e=>e.split("/").slice(0,-1).join("/")||"/",D=e=>e.split("/").at(-1),Re=typeof globalThis.showDirectoryPicker=="function"?async e=>{const i=await globalThis.showDirectoryPicker(e),t=async(s,o)=>{const n=s.split("/").filter(f=>f);let r=i;for(let f=0;f<n.length;f++){const d=n[f];if(r=await o(r,d,f,n)||void 0,!r)return}return r},l=(s,o)=>s.kind==="directory"?s.getDirectoryHandle(o).catch(()=>s.getFileHandle(o)).catch(()=>{}):void 0;return{async:!0,getType:async s=>t(s,l).then(o=>o?.kind==="directory"?"dir":o?.kind||null).catch(()=>null),readdir:async s=>t(s,l).then(async o=>{if(o?.kind!=="directory")return[];const n=[];for await(const r of o.keys())n.push(r);return n}),mkdir:async s=>{await t(s,(o,n,r,f)=>o.kind==="file"?Promise.reject(new Error(`attempt to create directory "${s}" failed - "${f.slice(0,r).join("/")} is a file`)):o.getDirectoryHandle(n,{create:!0}))},readFile:async s=>await t(s,(o,n,r,f)=>r<f.length-1?l(o,n):o.kind==="directory"?o.getFileHandle(n):void 0).then(o=>o?.kind==="file"?o.getFile().then(n=>n.text()):Promise.reject(`reading file "${s}" failed - not a file`)),writeFile:async(s,o)=>void await t(s,(n,r,f,d)=>f<d.length-1?l(n,r):n.kind==="directory"?n.getFileHandle(r,{create:!0}).then(c=>c.createWritable().then(u=>u.write(o).then(()=>u.close())).then(()=>c)):Promise.reject(new Error(`could not write file ${s}, since path is no parent directory`))),rm:async s=>void await t(s,(o,n,r,f)=>r<f.length-1?l(o,n):o.kind==="directory"?o.removeEntry(n,{recursive:!0}):Promise.reject(new Error(`${s} not found; could not be removed`)))}}:()=>Promise.resolve(null),Ve=(e,i,t="solid-primitive-filesystem")=>{let l;const s=i?.getItem(t);try{l=JSON.parse(typeof s=="string"?s:"null")}catch{}let o=l||e||{};s instanceof Promise&&s.then(c=>{o=Object.assign(c||{},o)});const n=()=>i?.setItem(t,JSON.stringify(o));n();const r=(c,u)=>{let a=o;return c=c.startsWith("/")?c.slice(1):c,c.split("/").forEach((g,y,h)=>{a=g?u(a,g,y,h):a}),a};function f(c=(u,a)=>[u,a]){const u=[],a=(g=o||{},y="/")=>{typeof g=="object"&&Object.keys(g).forEach(h=>typeof g[h]=="string"?u.push(c(`${y}${h}`,g[h])):a(g[h],`${y}${h}/`))};return a(),u}const d={async:!1,getType:c=>{if(c===""||c==="/")return"dir";const u=r(c,(a,g)=>typeof a=="object"?a[g]:void 0);return u===void 0?null:typeof u=="string"?"file":"dir"},mkdir:c=>(r(c,(u,a,g,y)=>{if(typeof u!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(u[a]===void 0)u[a]={};else if(typeof u[a]=="string")throw new Error(`Cannot overwrite file ${y.slice(0,g+1).join("/")} with path`);return u[a]}),n()),readdir:c=>{const u=r(c.replace(/^\/$/,""),(a,g,y,h)=>{if(typeof a!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);return y===0&&g===""?a:a=a[g]});if(typeof u!="object")throw new Error(`"${c}" is not a directory`);return Object.keys(u)},rename:(c,u)=>{let a;const g=r(c,(y,h,_,j)=>{if(typeof y!="object")throw new Error(`"${j.slice(0,_).join("/")}" is not a directory`);if(_+1>=j.length){if(y[h]===void 0)throw new Error(`${c} does not exist and therefore cannot be renamed`);a=h}return y[h]});r(u,(y,h,_,j)=>{if(typeof y!="object")throw new Error(`"${j.slice(0,_).join("/")}" is not a directory`);return _+1>=j.length&&Object.keys(y).forEach(b=>{b===a?(y[h]=g,delete y[b]):y[b]=y[b]}),y[h]})},rm:c=>void r(c,(u,a,g,y)=>{if(typeof u!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);return g+1===y.length?(delete u[a],n()):u=u[a],u}),readFile:c=>r(c,(u,a,g,y)=>{if(typeof u!="object")throw new Error(`"${y.slice(0,g).join("/")}" is not a directory`);if(u=u[a],g+1===y.length&&typeof u!="string")throw new Error(`"${c}" is not a file`);return u}),writeFile:(c,u)=>void r(c,(a,g,y,h)=>{if(typeof a!="object")throw new Error(`"${h.slice(0,y).join("/")}" is not a directory`);if(y+1===h.length){if(typeof a[g]=="object")throw new Error(`"${c}" is a directory and cannot be overwritten with a file`);a[g]=u,n()}else return a=a[g]}),toMap:()=>{const c={clear:()=>d.rm("/"),delete:u=>d.getType(u)==="file"&&d.rm(u),entries:()=>f()[Symbol.iterator](),forEach:u=>{f().forEach(([a,g])=>u(g,a,c))},get:u=>{try{return d.readFile(u)}catch{}},has:u=>d.getType(u)==="file",keys:()=>f(u=>u)[Symbol.iterator](),set:(u,a)=>{const g=A(u);return d.getType(g)!=="dir"&&d.mkdir(g),d.writeFile(u,a),c},get size(){return f().length},values:()=>f((u,a)=>a)[Symbol.iterator](),[Symbol.iterator]:()=>c.entries(),[Symbol.toStringTag]:"Map"};return c}};return d},We=(e,i)=>{const t=new Map,l=new Map,s=new Map,o={getType:(n,r)=>{t.has(n)||t.set(n,T());const[f,d]=t.get(n);return(r||f()===void 0)&&d(e.getType(n)),f()},readdir:(n,r)=>{l.has(n)||l.set(n,T());const[f,d]=l.get(n);return(r||f()===void 0)&&d(e.readdir(n)),f()},mkdir:n=>{e.mkdir(n),l.get(A(n))?.[1]((r=[])=>[...r,n])},readFile:(n,r)=>{s.has(n)||s.set(n,T());const[f,d]=s.get(n);return(r||f()===void 0)&&d(e.readFile(n)),f()},writeFile:(n,r)=>{const f=e.getType(n)===null;e.writeFile(n,r),s.get(n)?.[1](r),f&&(o.getType(n,!0),l.get(A(n))?.[1]((d=[])=>[...d,D(n)]))},rename:(n,r)=>{const f=e.getType(n),d=e.getType(r);if(f==="dir"&&d==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${n}"`);if(f==="file"&&d==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${n}"`);typeof e.rename=="function"?e.rename(n,r):f==="dir"?(d===null&&e.mkdir(r),e.readdir(n).forEach(c=>o.rename(`${n}/${c}`,`${r}/${c}`))):e.writeFile(r,e.readFile(n)),t.get(n)?.[1](void 0),t.delete(n),l.get(A(n))?.[1]((c=[])=>c.filter(u=>u===D(n))),l.get(A(r))?.[1]((c=[])=>[...c,D(r)])},rm:n=>{e.rm(n),t.get(n)?.[1](void 0),t.delete(n),[...l.keys()].forEach(r=>{r.startsWith(`${n}/`)&&(t.get(r)?.[1](void 0),t.delete(r))}),l.get(A(n))?.[1]((r=[])=>r.filter(f=>f===D(n)))}};return i&&i((n,r)=>{(n==="mkdir"||n==="rm")&&l.get(A(r))?.[1]((f=[])=>f.includes(r)?f:[...f,r]),n==="rm"&&t.get(r)?.[1](null),n==="writeFile"&&s.has(r)&&o.readFile(r,!0)}),o},ge=(e,i)=>{const t=new Map,l=new Map,s=new Map,o={getType:(n,r)=>{t.has(n)||t.set(n,J(()=>e.getType(n)));const[f,{refetch:d}]=t.get(n);return r&&d(),f()},readdir:(n,r)=>{l.has(n)||l.set(n,J(()=>e.readdir(n)));const[f,{refetch:d}]=l.get(n);return r&&d(),f()},mkdir:n=>e.mkdir(n).then(()=>{n.split("/").forEach((r,f,d)=>{const c=d.slice(0,f+1).join("/");t.has(c)?t.get(c)[1].refetch():o.getType(c)}),l.get(A(n))?.[1].refetch()}),readFile:(n,r)=>{s.has(n)||s.set(n,J(()=>e.readFile(n)));const[f,{refetch:d}]=s.get(n);return r&&d(),f()},writeFile:(n,r)=>e.writeFile(n,r).then(()=>{s.get(n)?.[1].mutate(r);const f=D(n);l.get(A(n))?.[1].mutate((d=[])=>d.includes(f)?d:[...d,f])}),rename:async(n,r)=>{const f=await e.getType(n),d=await e.getType(r);if(f==="dir"&&d==="file")throw new Error(`Cannot overwrite file "${r}" with directory "${n}"`);if(f==="file"&&d==="dir")throw new Error(`cannot overwrite directory "${r}" with file "${n}"`);typeof e.rename=="function"?await e.rename(n,r):(f==="dir"?(d===null&&await e.mkdir(r),(await e.readdir(n)).forEach(c=>o.rename(`${n}/${c}`,`${r}/${c}`))):await e.writeFile(r,await e.readFile(n)),await e.rm(n)),Te(()=>{t.get(n)?.[1].mutate(void 0),t.delete(n);const c=A(n);l.get(c)?.[1].refetch();const u=A(r);c!==u&&l.get(u)?.[1].refetch()})},rm:n=>e.rm(n).then(()=>{t.get(n)?.[1].mutate(void 0),t.delete(n),[...l.keys()].forEach(r=>{r.startsWith(`${n}/`)&&(t.get(r)?.[1].mutate(void 0),t.delete(r))}),l.get(A(n))?.[1].refetch()})};return i&&i((n,r)=>{(n==="mkdir"||n==="rm")&&l.get(A(r))?.[1].mutate((f=[])=>f.includes(r)?f:[...f,r]),n==="rm"&&t.get(r)?.[1].mutate(null),n==="writeFile"&&s.get(r)?.[1].refetch()}),o};function ye(e,i){if(e===null)throw new Error("file system adapter is null");return e instanceof Promise?e.then(t=>ge(t,i)):e.async?ge(e,i):We(e,i)}const Ue=k("<textarea>"),Ke=k("<div><p><button>"),Ge=k("<button>New File"),Je=k("<button>New Dir"),Qe=k("<div><button></button> <!> <input>"),Xe=k("<ul>"),Ye=k("<li>"),Ze=k("<h4>FileSystem primitive"),ze=k("<p>Object virtual file system (localStorage persistence)"),et=k("<p>Web Filesystem Access file system"),tt=k("<p><em>Warning!</em> This can overwrite or delete actual files!"),nt=k('<div class="box-border flex min-h-screen w-full flex-col items-center justify-center space-y-4 bg-gray-800 p-24 text-white"><div class="wrapper-v"><div>'),it=k("<div>Error: <!> <button>reset"),rt=k("<button>Request directory access"),st=e=>{const[i,t]=T(!1),l=I(o=>o||i()?e.fs.readFile(e.path):void 0),s=o=>e.fs.writeFile(e.path,o);return(()=>{const o=Ke(),n=o.firstChild,r=n.firstChild;return r.$$click=()=>t(!i()),N(r,()=>i()?"-":"+"),N(n,()=>D(e.path),null),N(o,C(V,{get when(){return i()},get children(){const f=Ue();return f.$$input=d=>s(d.currentTarget.value),W(()=>f.value=l()),f}}),null),o})()},le=e=>{const[i,t]=T(e.path==="/"),[l,s]=T(""),o=()=>i()&&e.fs.readdir(e.path);return[(()=>{const n=Qe(),r=n.firstChild,f=r.nextSibling,d=f.nextSibling,c=d.nextSibling,u=c.nextSibling;return r.$$click=()=>t(!i()),N(r,()=>i()?"-":"+"),N(n,()=>D(e.path)||"/",d),u.$$input=a=>s(a.currentTarget.value),N(n,C(V,{get when(){return l()!==""},get children(){return[(()=>{const a=Ge();return a.$$click=()=>e.fs.writeFile(`${e.path==="/"?"":e.path}/${l()}`,""),a})(),(()=>{const a=Je();return a.$$click=()=>e.fs.mkdir(`${e.path==="/"?"":e.path}/${l()}`),a})()]}}),null),n})(),C(V,{get when(){return o()!==void 0},get children(){const n=Xe();return N(n,C(Me,{get each(){return o()},children:r=>(()=>{const f=Ye();return N(f,C(V,{get when(){return e.fs.getType(r)==="dir"},get fallback(){return C(st,{get fs(){return e.fs},get path(){return`${e.path==="/"?"":e.path}/${r}`}})},get children(){return C(le,{get fs(){return e.fs},path:r})}})),f})()})),n}})]},lt=()=>{const e=Ve({src:{"index.ts":`console.log(0);
`}},localStorage),i=ye(e),[t,l]=T(!1),[s]=J(t,async()=>ye(Re({mode:"readwrite"})));return(()=>{const o=nt(),n=o.firstChild,r=n.firstChild;return N(r,C(Le,{fallback:(f,d)=>(()=>{const c=it(),u=c.firstChild,a=u.nextSibling,g=a.nextSibling,y=g.nextSibling;return N(c,f,a),qe(y,"click",d,!0),c})(),get children(){return[Ze(),ze(),C(le,{fs:i,path:"/"}),C(V,{get when(){return I(()=>!s.loading&&!s.error)()&&s()},get fallback(){return(()=>{const f=rt();return f.$$click=()=>l(!0),W(()=>f.disabled=s.loading),f})()},get children(){return[et(),tt(),C(le,{get fs(){return s()},path:"/"})]}})]}})),o})()};Ie(()=>C(lt,{}),document.getElementById("root"));Be(["click","input"]);

import{o as h,s as S,a as b,h as v,u as P,j as w,k as _,c as E,e as L,i as d,b as f,S as p,l as O,t as i}from"./index-4938f250.js";import{t as M,b as T,i as k,d as m,e as C,f as I}from"./index-faae49c2.js";function R(t,n,a,o){return t.addEventListener(n,a,o),M(t.removeEventListener.bind(t,n,a,o))}function y(t,n){const{push:a,execute:o}=T();return[(s,l,e)=>{const c=R(t,s,l,e??n);return a(c),c},h(o)]}function j(t,n=v()){let a=0,o,s;return()=>(a++,h(()=>{a--,queueMicrotask(()=>{!a&&s&&(s(),s=o=void 0)})}),s||b(l=>o=t(s=l),n),o)}function V(t){const n=v(),a=j(t,n);return()=>S.context?b(t,n):a()}function A(t){const n={...t},a={...t},o={},s=e=>{let c=o[e];if(!c){if(!_())return n[e];o[e]=c=E(n[e],{internal:!0}),delete n[e]}return c[0]()};for(const e in t)Object.defineProperty(a,e,{get:()=>s(e),enumerable:!0});const l=(e,c)=>{const r=o[e];if(r)return r[1](c);e in n&&(n[e]=m(c,[n[e]]))};return[a,(e,c)=>{if(k(e)){const r=P(()=>Object.entries(m(e,a)));w(()=>{for(const[u,$]of r)l(u,()=>$)})}else l(e,c);return a}]}var x={passive:!0},D={x:0,y:0,isInside:!1,sourceType:null};function U(t=window,n,a={}){const{touch:o=!0,followTouch:s=!0}=a,[l,e]=y(t,x),c=r=>n({x:r.pageX,y:r.pageY,sourceType:"mouse"});if(l("mousemove",c),l("dragover",c),o){const r=u=>{u.touches.length&&n({x:u.touches[0].clientX,y:u.touches[0].clientY,sourceType:"touch"})};l("touchstart",r),s&&l("touchmove",r)}return e}function X(t=window,n,a={}){const{touch:o=!0}=a,[s,l]=y(t,x);let e=!1,c=!o;function r(u){this==="mouse"?e=u:c=u,n(e||c)}return s("mouseover",r.bind("mouse",!0)),s("mouseout",r.bind("mouse",!1)),s("mousemove",r.bind("mouse",!0),{passive:!0,once:!0}),o&&(s("touchstart",r.bind("touch",!0)),s("touchend",r.bind("touch",!1))),l}function g(t,n={}){const a={...D,...n.initialValue},[o,s]=A(a),l=e=>{U(e,s,n),X(e,s.bind(void 0,"isInside"),n)};return typeof t!="function"?l(t):L(()=>l(t())),o}g.bind(void 0,void 0,void 0);const Y=i('<div><div class="ball bg-green-500"></div><p class="font-bold text-green-500 opacity-50">normal</p><p class="font-bold text-yellow-600 opacity-50">debounced</p><p class="font-bold text-cyan-500 opacity-50">throttled'),q=i('<div class="ball bg-yellow-600">'),F=i('<div class="ball bg-cyan-500">'),N=()=>{const t=g(),n=C([()=>t.x,()=>t.y],([o,s])=>({x:o,y:s}),200),a=I(()=>({x:t.x,y:t.y}),200);return(()=>{const o=Y(),s=o.firstChild,l=s.nextSibling;return d(o,f(p,{get when(){return n()},keyed:!0,children:({x:e,y:c})=>(()=>{const r=q();return`translate(${e}px, ${c}px)`!=null?r.style.setProperty("transform",`translate(${e}px, ${c}px)`):r.style.removeProperty("transform"),r})()}),l),d(o,f(p,{get when(){return a()},keyed:!0,children:({x:e,y:c})=>(()=>{const r=F();return`translate(${e}px, ${c}px)`!=null?r.style.setProperty("transform",`translate(${e}px, ${c}px)`):r.style.removeProperty("transform"),r})()}),l),O(()=>`translate(${t.x}px, ${t.y}px)`!=null?s.style.setProperty("transform",`translate(${t.x}px, ${t.y}px)`):s.style.removeProperty("transform")),o})()};export{N as default};

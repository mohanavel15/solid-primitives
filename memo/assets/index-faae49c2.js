import{h as p,o as h,c as f,m,u as l,n as b,p as S,r as M,a as g}from"./index-4938f250.js";var j=(e,t)=>{let s;const n=()=>clearTimeout(s);return p()&&h(n),Object.assign((...o)=>{s!==void 0&&n(),s=setTimeout(()=>e(...o),t)},{clear:n})},w=(e,t)=>{let s=!1,n,c;const o=(...r)=>{c=r,!s&&(s=!0,n=setTimeout(()=>{e(...c),s=!1},t))},a=()=>{clearTimeout(n),s=!1};return p()&&h(a),Object.assign(o,{clear:a})},O=()=>{};function A(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function L(e,...t){return typeof e=="function"?e(...t):e}var W=h,E=()=>{let e=[];const t=()=>e=[];return{push:(...s)=>e.push(...s),execute(s,n,c,o){e.forEach(a=>a(s,n,c,o)),t()},clear:t}};const T=(e,t)=>e.length>0?()=>e(l(t)):e;function k(e,t){const s=p(),n=new Set;let c=0,o=!1;return h(()=>{for(const a of n)a();n.clear(),o=!0}),a=>{if(o){l(a);return}c++,g(r=>{n.add(r);let i=!0;b(()=>{if(i)return i=!1,a();--c===0&&l(e),r(),n.delete(r)},t)},s)}}function x(e,t){let s=0;const n=e.map((c,o)=>m(()=>(s=o,c())));return m(()=>n.map(c=>c())[s],void 0,t)}function R(e,t,s){let n=()=>t;const[c,o]=f(t),a=m(T(e,()=>n()),t);return[n=x([c,a],s),r=>o(()=>typeof r=="function"?r(l(n)):r)]}function I(e,t,s,n,c){let o=!0;const[a,r]=f((()=>{let u;return b(S(e,(d,v)=>{o?(u=t(d,v,n),o=!1):i(d,v)})),u})(),c),i=j((u,d)=>{r(()=>t(u,d,a()))},s);return a}function P(e,t,s,n){let c=O;const o=k(()=>c()),[a,r]=f((()=>{let i;return o(()=>i=e(s)),i})(),n);return c=w(()=>o(()=>r(e)),t),a}function q(e,t={}){const[s,n]=f(t.value,t),c=[];return b(async()=>{const o=e(l(s));o instanceof Promise?(c.push(o),o.then(a=>c.includes(o)&&n(()=>a)),o.finally(()=>{const a=c.indexOf(o);c.splice(0,a+1)})):n(()=>o)},void 0),s}const y={equals:!1};function C(e,t,s){let n=!1,c=!0;const[o,a]=f(void 0,y),r=m(i=>n?e(i):(c=!o(),i),t,y);return()=>{n=!0,c&&(c=a());const i=r();return n=!1,i}}function D(...e){const t=new Map,s=p(),n=typeof e[1]=="function"?e[0]:void 0,c=typeof e[1]=="function"?e[1]:e[0],o=typeof e[1]=="object"?e[1]:typeof e[2]=="object"?e[2]:{},a=r=>{if(t.has(r))return t.get(r)();const i=M(s,()=>C(u=>c(r,u),void 0));return(o.size===void 0||t.size<o.size)&&t.set(r,i),i()};return n?()=>a(n()):a}export{q as a,E as b,C as c,L as d,I as e,P as f,D as g,R as h,A as i,W as t};

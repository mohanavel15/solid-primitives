import{c as v,o as M,u as x,a as _,b as N,d as T,e as P,i as h,f as A,g as R,t as $}from"./index-cd71a826.js";function S(n){const e=typeof n.on=="function"||Array.isArray(n.on)?n.on:()=>n.on;return v(M(e,(t,i)=>{const s=n.children;return typeof s=="function"&&s.length>0?s(t,i):s}))}var q=()=>{},g=(n,e)=>e();function w(n,e){const t=x(n),i=t?[t]:[],{onEnter:s=g,onExit:d=g}=e,[m,l]=_(e.appear?[]:i),[c]=P();let f,a=!1;function u(r,o){if(!r)return o&&o();a=!0,d(r,()=>{T(()=>{a=!1,l(E=>E.filter(b=>b!==r)),o&&o()})})}function C(r){const o=f;if(!o)return r&&r();f=void 0,l(E=>[o,...E]),s(o,r??q)}const F=e.mode==="out-in"?r=>a||u(r,C):e.mode==="in-out"?r=>C(()=>u(r)):r=>{C(),u(r)};return N(r=>{const o=n();return x(c)?(c(),r):(o!==r&&(f=o,T(()=>x(()=>F(r)))),o)},e.appear?void 0:t),m}var y=n=>n instanceof Element;function L(n,e){if(e(n))return n;if(typeof n=="function"&&!n.length)return L(n(),e);if(Array.isArray(n))for(const t of n){const i=L(t,e);if(i)return i}return null}function B(n,e=y,t=y){const i=v(n);return v(()=>L(i(),e))}function I(n){return v(()=>{const e=n.name||"s";return{enterActiveClasses:(n.enterActiveClass||e+"-enter-active").split(" "),enterClasses:(n.enterClass||e+"-enter").split(" "),enterToClasses:(n.enterToClass||e+"-enter-to").split(" "),exitActiveClasses:(n.exitActiveClass||e+"-exit-active").split(" "),exitClasses:(n.exitClass||e+"-exit").split(" "),exitToClasses:(n.exitToClass||e+"-exit-to").split(" "),moveClasses:(n.moveClass||e+"-move").split(" ")}})}function k(n){requestAnimationFrame(()=>requestAnimationFrame(n))}function O(n,e,t,i){const{enterClasses:s,enterActiveClasses:d,enterToClasses:m}=n,{onBeforeEnter:l,onEnter:c,onAfterEnter:f}=e;l?.(t),t.classList.add(...s),t.classList.add(...d),queueMicrotask(()=>{if(!t.parentNode)return i?.();c?.(t,()=>a())}),k(()=>{t.classList.remove(...s),t.classList.add(...m),(!c||c.length<2)&&(t.addEventListener("transitionend",a),t.addEventListener("animationend",a))});function a(u){(!u||u.target===t)&&(i?.(),t.removeEventListener("transitionend",a),t.removeEventListener("animationend",a),t.classList.remove(...d),t.classList.remove(...m),f?.(t))}}function D(n,e,t,i){const{exitClasses:s,exitActiveClasses:d,exitToClasses:m}=n,{onBeforeExit:l,onExit:c,onAfterExit:f}=e;if(!t.parentNode)return i?.();l?.(t),t.classList.add(...s),t.classList.add(...d),c?.(t,()=>a()),k(()=>{t.classList.remove(...s),t.classList.add(...m),(!c||c.length<2)&&(t.addEventListener("transitionend",a),t.addEventListener("animationend",a))});function a(u){(!u||u.target===t)&&(i?.(),t.removeEventListener("transitionend",a),t.removeEventListener("animationend",a),t.classList.remove(...d),t.classList.remove(...m),f?.(t))}}var j={inout:"in-out",outin:"out-in"},z=n=>{const e=I(n);return w(B(()=>n.children),{mode:j[n.mode],appear:n.appear,onEnter(t,i){O(e(),n,t,i)},onExit(t,i){D(e(),n,t,i)}})};const G=$('<button class="btn">'),H=$('<div class="wrapper-h">'),K=()=>{const[n,e]=_(0);return(()=>{const t=H();return h(t,A(z,{onEnter:(i,s)=>{i.animate([{opacity:0},{opacity:1}],{duration:600}).finished.then(s)},onExit:(i,s)=>{i.animate([{opacity:1},{opacity:0}],{duration:600}).finished.then(s)},mode:"outin",get children(){return A(S,{on:n,get children(){const i=G();return i.$$click=()=>e(s=>++s),h(i,n),i}})}})),t})()};R(["click"]);export{K as default};
